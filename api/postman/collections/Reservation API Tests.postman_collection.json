{
  "info": {
    "_postman_id": "e4bdd77e-ec99-42aa-903c-dd57ffab23c3",
    "name": "Reservation API Tests",
    "description": "Collection complète pour tester toutes les APIs de réservation",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "Auth",
      "item": [
        {
          "name": "Register User",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    if (response.data && response.data.user) {",
                  "        pm.collectionVariables.set('userId', response.data.user.id);",
                  "    }",
                  "}"
                ],
                "type": "text/javascript",
                "id": "e69c5dda-22c1-4c5f-96c0-73705b7c3a16"
              }
            }
          ],
          "id": "7c85e1f2-d183-4e9c-bdeb-bdc9be93cd9f",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"test@example.com\",\n  \"password\": \"Password123!\",\n  \"firstName\": \"Test\",\n  \"lastName\": \"User\",\n  \"role\": \"PARTICIPANT\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/register",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "auth",
                "register"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Register Admin",
          "id": "4651b7d9-42db-4085-92ef-a9d65d8d13ed",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"admin@example.com\",\n  \"password\": \"AdminPass123!\",\n  \"firstName\": \"Admin\",\n  \"lastName\": \"User\",\n  \"role\": \"ADMIN\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/register",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "auth",
                "register"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Verify Email",
          "id": "287c3cd5-bc56-4136-94c7-1cc5716dd127",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"test@example.com\",\n  \"code\": \"123456\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/verify-email",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "auth",
                "verify-email"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Resend Verification",
          "id": "5d08186f-0987-413c-8c38-66af6e972a7a",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"test@example.com\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/resend-verification",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "auth",
                "resend-verification"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Login",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    if (response.data && response.data.access_token) {",
                  "        pm.collectionVariables.set('token', response.data.access_token);",
                  "    }",
                  "}"
                ],
                "type": "text/javascript",
                "id": "ee656547-edae-46ed-851f-26609f92e8a6"
              }
            }
          ],
          "id": "8235b237-bb76-4f8a-803f-31af9d00bdfc",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"admin@example.com\",\n  \"password\": \"AdminPass123!\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/login",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "auth",
                "login"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Forgot Password",
          "id": "96dc175e-88d5-4c37-8845-c5cdf40e88ed",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"test@example.com\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/forgot-password",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "auth",
                "forgot-password"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Reset Password",
          "id": "456cdb29-615a-477d-a186-d3fb9971a953",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"test@example.com\",\n  \"code\": \"123456\",\n  \"newPassword\": \"NewPassword123!\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/reset-password",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "auth",
                "reset-password"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Login Copy",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    if (response.data && response.data.access_token) {",
                  "        pm.collectionVariables.set('token', response.data.access_token);",
                  "    }",
                  "}"
                ],
                "type": "text/javascript",
                "id": "ee656547-edae-46ed-851f-26609f92e8a6"
              }
            }
          ],
          "id": "5011ab01-c7b4-48dd-b655-3b346faef0dd",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"admin@example.com\",\n  \"password\": \"AdminPass123!\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/login",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "auth",
                "login"
              ]
            }
          },
          "response": []
        }
      ],
      "id": "ec5b09c4-da2d-4516-82a9-261930f2f091"
    },
    {
      "name": "Events",
      "item": [
        {
          "name": "Create Event",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    if (response.data && response.data.id) {",
                  "        pm.collectionVariables.set('eventId', response.data.id);",
                  "    }",
                  "}"
                ],
                "type": "text/javascript",
                "id": "95fb144a-5f43-4a19-85a7-18429ae698fa"
              }
            }
          ],
          "id": "69dc9848-be43-4455-a43e-f46c1d640297",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"title\": \"Conférence Tech 2024\",\n  \"description\": \"Une conférence sur les dernières technologies\",\n  \"date\": \"2024-12-31T10:00:00Z\",\n  \"location\": \"Centre de conférences\",\n  \"capacity\": 100,\n  \"price\": 50.00,\n  \"category\": \"CONFERENCE\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/events",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "events"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Get All Events",
          "id": "c2ec5712-544f-4acd-ae61-66b385db798d",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/events",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "events"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Get Event by ID",
          "id": "c3e82dfc-f21d-4aae-aa36-62bb6973979c",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/events/{{eventId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "events",
                "{{eventId}}"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Update Event",
          "id": "64f107b5-357f-4c66-82e1-9453b5fc5fbd",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"title\": \"Conférence Tech 2024 - Mise à jour\",\n  \"description\": \"Une conférence mise à jour sur les dernières technologies\",\n  \"capacity\": 150,\n  \"price\": 60.00\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/events/{{eventId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "events",
                "{{eventId}}"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Publish Event",
          "id": "0437b091-3e6c-4389-9047-8b8ca221a5a0",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/events/{{eventId}}/publish",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "events",
                "{{eventId}}",
                "publish"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Delete Event",
          "id": "417af65e-092c-4082-aaca-71e8c2bde793",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/events/{{eventId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "events",
                "{{eventId}}"
              ]
            }
          },
          "response": []
        }
      ],
      "id": "50fa688f-7413-41c9-8e68-67b1f4fe7003"
    },
    {
      "name": "Reservations",
      "item": [
        {
          "name": "Create Reservation",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    if (response.data && response.data.id) {",
                  "        pm.collectionVariables.set('reservationId', response.data.id);",
                  "    }",
                  "}"
                ],
                "type": "text/javascript",
                "id": "96b29584-a136-42bc-9a22-1cd392300be4"
              }
            }
          ],
          "id": "d113d98f-50d9-4068-8b00-f5f839bd963c",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/reservations/{{eventId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "reservations",
                "{{eventId}}"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Get All Reservations (Admin)",
          "id": "14066f9c-6354-49d0-9469-2c530477f98c",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/reservations",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "reservations"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Get My Reservations",
          "id": "ae88800c-1062-470b-8ac8-8cb0bf18cf92",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/reservations/my",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "reservations",
                "my"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Get Reservation by ID",
          "id": "acb82d75-07e7-484c-893d-693d9ed8884a",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/reservations/{{reservationId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "reservations",
                "{{reservationId}}"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Update Reservation Status (Admin)",
          "id": "60d7698b-6ce7-4e39-a4eb-f88802e1aaf4",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"status\": \"CONFIRMED\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/reservations/{{reservationId}}/status",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "reservations",
                "{{reservationId}}",
                "status"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Cancel Reservation",
          "id": "d54f5b3d-b24e-4033-b28f-7076243ff165",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/reservations/{{reservationId}}/cancel",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "reservations",
                "{{reservationId}}",
                "cancel"
              ]
            }
          },
          "response": []
        }
      ],
      "id": "7edc3807-a498-4dd9-ac0b-76656c12cc46"
    },
    {
      "name": "Test Scenarios",
      "item": [
        {
          "name": "Complete Flow Test",
          "item": [
            {
              "name": "1. Register Admin",
              "id": "e4234822-dbbb-4d4e-93ee-469c3d4704c6",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"email\": \"flow-admin@test.com\",\n  \"password\": \"FlowAdmin123!\",\n  \"firstName\": \"Flow\",\n  \"lastName\": \"Admin\",\n  \"role\": \"ADMIN\"\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/auth/register",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "auth",
                    "register"
                  ]
                }
              },
              "response": []
            },
            {
              "name": "2. Login Admin",
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "if (pm.response.code === 200) {",
                      "    const response = pm.response.json();",
                      "    pm.collectionVariables.set('token', response.data.access_token);",
                      "}"
                    ],
                    "type": "text/javascript",
                    "id": "5d903c37-f5ab-404c-9400-dd0c5e696a03"
                  }
                }
              ],
              "id": "6521f0a2-6598-4e03-b6a2-e0182d764caf",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"email\": \"flow-admin@test.com\",\n  \"password\": \"FlowAdmin123!\"\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/auth/login",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "auth",
                    "login"
                  ]
                }
              },
              "response": []
            },
            {
              "name": "3. Create Event",
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "if (pm.response.code === 201) {",
                      "    const response = pm.response.json();",
                      "    pm.collectionVariables.set('eventId', response.data.id);",
                      "}"
                    ],
                    "type": "text/javascript",
                    "id": "b66fb1f7-8a6c-47bd-9264-c58eb5155451"
                  }
                }
              ],
              "id": "81034be4-dcc5-485b-83ad-ed192db88943",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  },
                  {
                    "key": "Authorization",
                    "value": "Bearer {{token}}"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"title\": \"Test Event Flow\",\n  \"description\": \"Event pour test complet\",\n  \"date\": \"2024-12-31T15:00:00Z\",\n  \"location\": \"Test Location\",\n  \"capacity\": 50,\n  \"price\": 25.00,\n  \"category\": \"WORKSHOP\"\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/events",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "events"
                  ]
                }
              },
              "response": []
            },
            {
              "name": "4. Publish Event",
              "id": "e0fa1cec-0756-4b0b-bcf5-b396a277bdd8",
              "request": {
                "method": "PUT",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{token}}"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/events/{{eventId}}/publish",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "events",
                    "{{eventId}}",
                    "publish"
                  ]
                }
              },
              "response": []
            },
            {
              "name": "5. Register Participant",
              "id": "783419f0-324e-4506-8e34-0227ff2b8ddd",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"email\": \"participant@test.com\",\n  \"password\": \"Participant123!\",\n  \"firstName\": \"Test\",\n  \"lastName\": \"Participant\",\n  \"role\": \"PARTICIPANT\"\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/auth/register",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "auth",
                    "register"
                  ]
                }
              },
              "response": []
            },
            {
              "name": "6. Login Participant",
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "if (pm.response.code === 200) {",
                      "    const response = pm.response.json();",
                      "    pm.collectionVariables.set('token', response.data.access_token);",
                      "}"
                    ],
                    "type": "text/javascript",
                    "id": "4135f28b-5be1-4eff-a11b-ce958d0a040c"
                  }
                }
              ],
              "id": "065c181b-083f-49de-95ed-6b4d9198d755",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"email\": \"participant@test.com\",\n  \"password\": \"Participant123!\"\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/auth/login",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "auth",
                    "login"
                  ]
                }
              },
              "response": []
            },
            {
              "name": "7. Make Reservation",
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "if (pm.response.code === 201) {",
                      "    const response = pm.response.json();",
                      "    pm.collectionVariables.set('reservationId', response.data.id);",
                      "}"
                    ],
                    "type": "text/javascript",
                    "id": "7dc32f8a-be5c-4bd6-9a66-05772f3e0fa0"
                  }
                }
              ],
              "id": "3907f9dd-1d13-4f40-9ab2-7f9f69409bfe",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{token}}"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/reservations/{{eventId}}",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "reservations",
                    "{{eventId}}"
                  ]
                }
              },
              "response": []
            },
            {
              "name": "8. Check My Reservations",
              "id": "6d3fb4e4-50ad-4621-8283-6a0e9aff2be4",
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{token}}"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/reservations/my",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "reservations",
                    "my"
                  ]
                }
              },
              "response": []
            }
          ],
          "id": "27437676-8e1f-45c0-a3b4-5ff4e201c338"
        }
      ],
      "id": "e4cdbf0c-8d45-46df-b006-9e66c7a259a6"
    }
  ],
  "variable": [
    {
      "id": "e45ec94f-a7af-4854-97cc-23be0e1599f9",
      "key": "baseUrl",
      "value": "http://localhost:3000",
      "type": "string"
    },
    {
      "id": "9be1045b-00a7-40d0-845a-d2260b44158d",
      "key": "token",
      "value": "",
      "type": "string"
    },
    {
      "id": "e9768994-2f5a-45a4-af77-788af8818083",
      "key": "userId",
      "value": "",
      "type": "string"
    },
    {
      "id": "40d33b70-e2ba-41aa-8572-8638e96f35b7",
      "key": "eventId",
      "value": "",
      "type": "string"
    },
    {
      "id": "dc934ce4-e2d7-46a8-8a60-2ee8a4045ffc",
      "key": "reservationId",
      "value": "",
      "type": "string"
    }
  ]
}